(()=>{"use strict";class t{constructor(t,e,o,s,i,n,c,a,r){this.id=t,this.imageLinks=e,this.autors=o,this.title=s,this.ratingCount=i,this.averageRating=n,this.description=c,this.saleInfo=a,this.buttontype=r}getHtml(){return`\n            <div class="book">\n                <img class="book__image" src="${this.imageLinks}" alt="">\n                <div class="book__main">\n                    <p class="book__authors">${this.autors}</p>\n                    <p class="book__titles">${this.title}</p>\n                    <div class="book__rating">\n                        <p class="book__stars">${this.averageRating}</p>\n                        <p class="book__ratingcount">${this.ratingCount}</p>\n                    </div>\n                    <p class="book__description">${this.description}</p>\n                    <p class="book__sale">${this.saleInfo}</p>\n                    <button class="${this.buttontype} standartbtn bookbtn" data-id="${this.id}"></button>\n                </div>\n            </div>\n        `}}function e(t){return!!localStorage.getItem(t)}function o(){const t=document.getElementById("icon_circle"),e=document.styleSheets[1];e.deleteRule(0),e.insertRule(`:root{--bugcontent:"${localStorage.length}"}`),0==localStorage.length?t.classList.remove("icon_circle_active"):(t.classList.add("icon_circle_active"),localStorage.length<10?(t.classList.add("icons_circle_1"),t.classList.remove("icons_circle_10")):(t.classList.add("icons_circle_10"),t.classList.remove("icons_circle_1")))}const s=document.querySelector(".books__container"),i=document.querySelector(".windows8");function n(o){i.classList.add("load_display_block"),i.classList.remove("load_display_none"),fetch(o).then((t=>t.json())).then((o=>{o.items.forEach((o=>{const n=o.id,c=o.volumeInfo;let a="";a=o.saleInfo.retailPrice?`${o.saleInfo.retailPrice.amount} ${o.saleInfo.retailPrice.currencyCode}`:"";let r="",l="",u="./images/nophoto.png",d="",b="",g="buybutton";c.description&&(r=c.description.length>100?c.description.slice(0,100)+"...":c.description),c.title&&(l=c.title.length>25?c.title.slice(0,25)+"...":c.title),c.imageLinks&&(u=c.imageLinks.thumbnail),c.averageRating&&(d=`<img src="./images/${c.averageRating}stars.png" alt="" style="width: 100px">`),c.ratingsCount&&(b=c.ratingsCount+"M review"),e(o.id)&&(g="sellbutton");const _=new t(n,u,c.authors,l,b,d,r,a,g);s.innerHTML+=_.getHtml(),i.classList.add("load_display_none"),i.classList.remove("load_display_block")}))})).catch((t=>console.log(`Error! ${t}`)))}function c(){const t=document.querySelector(".books__container"),e=document.querySelector(".books__theam_active").textContent,o=t.getAttribute("data-count");return`https://www.googleapis.com/books/v1/volumes?q="${a[e]}"&key=AIzaSyAexjbpLfy3hCwvXn4wrNa3RiBW_VrkDG8&printType=books&startIndex=${o}&maxResults=6&langRestrict=en`}const a={Architecture:"subject:Architecture","Art & Fashion":"subject:Art",Biography:"subject:Biography & Autobiography",Business:"subject:Business","Crafts & Hobbies":"subject:Crafts & Hobbies",Drama:"subject:Drama",Fiction:"subject:Fiction","Food & Drink":"subject:Cooking","Health & Wellbeing":"subject:Health & Fitness","History & Politics":"subject:History",Humor:"subject:Humor",Poetry:"subject:Poetry",Psychology:"subject:Psychology",Science:"subject:Science",Technology:"subject:Technology","Travel & Maps":"subject:Travel"},r=document.querySelector(".books__container");document.addEventListener("click",(t=>{if(t.target.classList.contains("bookbtn")){const i=t.target.getAttribute("data-id");console.log("Clicked!",t.target.getAttribute("data-id")),console.log(localStorage),e(i)?(s=i,localStorage.removeItem(s),t.target.classList.remove("sellbutton"),t.target.classList.add("buybutton")):(function(t){localStorage.setItem(t,"BUY")}(i),t.target.classList.remove("buybutton"),t.target.classList.add("sellbutton")),o()}var s})),o(),n(c()),function(){const t=document.querySelectorAll(".books__theam");t.forEach((e=>{e.addEventListener("click",(()=>{document.querySelector(".books__container").setAttribute("data-count","0"),document.querySelector(".books__container").innerHTML="",t.forEach((t=>{t.classList.remove("books__theam_active")})),e.classList.add("books__theam_active"),n(c())}))}))}(),document.querySelector(".newloader__btn").addEventListener("click",(()=>{r.setAttribute("data-count",""+(+r.getAttribute("data-count")+6)),n(c())}))})();